!function(n,e){"use strict";var t=n.console||{log:function(){}},i=n.angular,o=n.CybozuLabs,r=i.module("md5htmlApp",[]);r.config(["$compileProvider",function(n){n.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|blob):/)}]),r.controller("MainCtrl",["$scope","$window",function(n,e){n.supported=!!(e.File&&e.FileReader&&e.FileList)}]),r.factory("md5",["$q","$rootScope",function(e,i){var r=o.MD5,c={};return c.read=function(o){t.log("read callded: ",o);var c=e.defer(),l=new n.FileReader;return l.onload=function(n){c.resolve(r.calc(n.target.result)),i.$apply()},l.onerror=function(){t.log("onerror callded"),c.reject(this),i.$apply()},l.readAsBinaryString(o),c.promise},c}]),r.controller("md5",["$scope","$window","md5",function(i,o,r){i.files=[],i.$watch("filelist",function(n){if(n){var o=function(n){return function(e){n.md5=e,t.log("then called: ",e),i.makeTxt()}};n.forEach(function(n){r.read(n).then(o(n)),n.md5="Calculating...",i.files.push(n)}),i.filelist=e}}),i.clear=function(){i.files=[]};var c=o.URL||o.webkitURL;i.makeTxt=function(){var e=i.files.map(function(n){return n.name+", "+n.md5}).join("\n");i.md5href=c.createObjectURL(new n.Blob([e],{type:"text/plain"})),t.log(i.md5href)}}]),r.directive("selectAll",function(){return function(n,e){e.bind("click",function(){e.select()})}}),r.directive("dropArea",["$window",function(n){return function(e,t,i){var o=function(n){n.stopPropagation(),n.preventDefault()};t.bind("dragover",o),t.bind("drop",function(n){o(n),e[i.dropArea]=[].slice.call(n.dataTransfer.files),e.$apply()}),t.bind("click",function(){n.document.querySelector("input").click()})}}]),r.directive("filelistBind",function(){return function(n,e,t){e.bind("change",function(e){n.$apply(function(){var i=[].slice.call(e.target.files);n[t.name]=i})})}})}(window);